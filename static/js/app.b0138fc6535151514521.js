webpackJsonp([1],{100:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"header"}},[i("div",{staticClass:"header-wrapper"},[i("mu-appbar",{attrs:{title:"焕铎新闻"}},[i("mu-icon-button",{attrs:{icon:"menu"},slot:"left"}),t._v(" "),i("mu-icon-button",{attrs:{icon:"expand_more"},slot:"right"})],1),t._v(" "),i("div",{attrs:{id:"navbar"}},[i("div",{staticClass:"navbar-wrapper"},[i("ul",t._l(t.channels,function(e,s){return i("li",{key:s},[i("router-link",{attrs:{to:{path:e.cid}}},[t._v("\n                                "+t._s(e.cname)+"\n                            ")])],1)}))])])],1)]),t._v(" "),!t.showList||t.loadingList?i("mu-circular-progress",{attrs:{size:40}}):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showList&&!t.loadingList,expression:"showList && !loadingList"}],staticStyle:{position:"relative"},attrs:{id:"list"}},[i("mu-refresh-control",{attrs:{refreshing:t.refreshing,trigger:t.trigger},on:{refresh:t.refresh}}),t._v(" "),t._l(t.newsListData,function(e,s){return i("div",{key:s,staticStyle:{"margin-top":"5px","margin-bottom":"5px"}},[7==e.module?i("div",{staticClass:"content_item content-card",staticStyle:{"margin-top":"5px","margin-bottom":"5px"}},[i("div",{staticClass:"card-title"},[t._v(t._s(e.data.title))]),t._v(" "),i("div",{staticClass:"card-list"},t._l(e.data.news,function(e,s){return i("div",{key:s,staticClass:"content_item common"},[i("router-link",{attrs:{to:{path:"article/"+e.gid}}},[i("div",{staticClass:"content_main"},[i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[t._v(t._s(e.data.title))]),t._v(" "),i("div",{staticClass:"tips"},[i("div",{staticClass:"tip"},[t._v(t._s(e.data.source))]),t._v(" "),i("div",{staticClass:"tip"},[t._v(t._s(e.data.pdate))])])]),t._v(" "),i("div",{staticClass:"img",style:{backgroundImage:"url("+e.data.covers[0]+")"}})])])],1)}))]):t._e(),t._v(" "),7!=e.module?i("div",{staticClass:"content_item",staticStyle:{"margin-top":"5px","margin-bottom":"5px"}},[i("router-link",{attrs:{to:{path:"article/"+e.gid,params:{gid:e.gid}}}},[i("div",{staticClass:"content_main"},[i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[t._v(t._s(e.data.title))]),t._v(" "),i("div",{staticClass:"tips"},[i("div",{staticClass:"tip"},[t._v(t._s(e.data.source))]),t._v(" "),i("div",{staticClass:"tip"},[t._v(t._s(e.data.pdate))])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2!=e.module,expression:"news.module != 2"}],staticClass:"img",style:{backgroundImage:"url("+e.data.covers[0]+")"}},[3==e.type||6==e.type?i("div",{staticClass:"play-icon"}):t._e(),t._v(" "),3==e.type||6==e.type?i("div",{staticClass:"tip"},[t._v(t._s(e.data.duration))]):t._e()])])])],1):t._e()])}),t._v(" "),i("mu-infinite-scroll",{attrs:{scroller:t.scroller,loading:t.isLoadMore,loadingText:"你好啊..."},on:{load:t.load}})],2)],1)},staticRenderFns:[]}},23:function(t,e,i){"use strict";var s=i(2),n=i(101),o=i(93),a=i.n(o),r=i(94),l=i.n(r),c=i(95);i.n(c);s.default.use(n.a);var d=[{path:"/:id",component:l.a},{path:"/article/:id",component:a.a},{path:"/",redirect:"/2da8f707e9d514c562162540d2b0ad57"}],u=new n.a({routes:d});e.a=u},24:function(t,e,i){"use strict";var s=i(2),n=i(9),o=i(54),a=i(55),r=i(53);s.default.use(n.a);var l={channels:[],newslist:{"2da8f707e9d514c562162540d2b0ad57":[],"7389193781085e10178780f6bbb3c79e":[],d7faaf6c50a2a79b38c6e49bf41695b0:[],"3ea38d7ceaf218aee879343ce6d2c826":[],"7af450a9dcc60c0af56db7421a461c02":[],eaabd3750a92632e39431d1197b80acc:[],cbe17b8edb6d4ed5dcdd8e97c6a3f9ce:[],cde065b013e874b45414c7eb5bb4567e:[],ccaa7b3dafbdd70a7a0abeb17902e994:[],"5669459fffd471c7adb81621ccc652f2":[],"4e9715a3087a5cf063107c9132be55f5":[],"0cb13d67ec9dcf5c335fc1df70a05877":[],"061cb455af79d267b43ea9419bfeca0e":[],db497643fe8a6c9f0bffd1e53c9cadff:[]},article:{},showList:!1,loadingList:!0,loadingArticle:!0,isLoadMore:!1,refreshing:!1};e.a=new n.a.Store({state:l,getters:o.a,mutations:a.a,actions:r.a})},25:function(t,e){},27:function(t,e,i){i(89);var s=i(1)(i(46),i(99),null,null);t.exports=s.exports},28:function(t,e,i){i(87);var s=i(1)(i(47),i(97),null,null);t.exports=s.exports},46:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",data:function(){return{msg:"Welcome to Your Vue.js App"}}}},47:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(51);e.default={name:"infinite-scroll",mixins:[s.a],props:{loading:{type:Boolean,default:!1},loadingText:{type:String,default:"正在加载..."}},methods:{onScroll:function(){if(console.log("被绑定事件了..."),!this.loading){var t=this.scroller,e=t===window,i=e?t.scrollY:t.scrollTop;(e?document.documentElement.scrollHeight||document.body.scrollHeight:t.scrollHeight)-i-5<=(e?window.innerHeight:t.offsetHeight)&&this.$emit("load")}}}}},48:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(15),n=i.n(s),o=i(3),a=(i.n(o),i(21)),r=(i.n(a),i(9));e.default={data:function(){return{}},computed:n()({},i.i(r.b)(["article","loadingArticle"])),methods:n()({},i.i(r.c)(["getArticle"])),created:function(){console.log("新闻列表传来的参数：",this.$route.params.id)},beforeRouteEnter:function(t,e,i){i(function(t){console.log(456),t.getArticle(t.$route.params.id)})},beforeRouteLeave:function(t,e,i){console.log("离开了"),this.$store.commit("setArticle"),this.$store.commit("setLoadingArticle",!0),i()}}},49:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(15),n=i.n(s),o=i(3),a=(i.n(o),i(9));e.default={data:function(){return{scroller:null,trigger:null,isRefreshing:!1,path:this.$route.params.id}},mounted:function(){this.scroller=this.$el,this.trigger=document.getElementById("list"),this.getChannels(),this.getNewsList({cid:this.$route.params.id}),console.log("$route：",this.$route),console.log("this.$el：",this.$el)},computed:n()({},i.i(a.b)(["channels","newslist","showList","loadingList","isLoadMore","refreshing"]),{newsListData:function(){return this.newslist[this.$route.params.id]}}),methods:n()({},i.i(a.c)(["getChannels","getNewsList","loadMore","refreshMore"]),{load:function(){console.log("加载更多触发了..."),console.log("scrollHeight:",this.$el.scrollHeight),0!=this.$el.scrollHeight&&this.newslist[this.$route.params.id].length>0&&this.loadMore(this.$route.params.id)},refresh:function(){console.log("触发了..."),console.log(document.body.scrollTop),0==document.body.scrollTop&&this.refreshMore(this.$route.params.id)}}),watch:{$route:function(){/^\/\w+$/.test(this.$route.path)&&(this.newslist[this.$route.params.id].length>0||(this.getNewsList({cid:this.$route.path.slice(1)}),this.$store.commit("setLoadingList",!0))),console.log("$route路由变化了：",this.$route.path)}}}},50:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){for(var t=[],e=0;e<20;e++)t.push("item"+(e+1));return{list:t,num:10,loading:!1,scroller:null}},mounted:function(){this.scroller=this.$el},methods:{loadMore:function(){var t=this;this.loading=!0,setTimeout(function(){for(var e=t.num;e<t.num+10;e++)t.list.push("item"+(e+1));t.num+=10,t.loading=!1},2e3)}}}},51:function(t,e,i){"use strict";e.a={props:{scroller:{type:[HTMLDocument,Element,Window],default:function(){return window}}},mounted:function(){console.log("1.触发了mounted..."),this.$bindScroll()},methods:{$bindScroll:function(){var t=this;console.log("2.触发了$bindScroll..."),this.scroller&&(console.log("3.触发了$bindScroll..."),this._handleScroll=function(e){t.onScroll&&t.onScroll()},this.scroller.addEventListener("scroll",this._handleScroll),console.log("window:",this.scroller))},$unbindScroll:function(t){console.log("4.触发了$unbindScroll..."),t=t||this.scroller,this._handleScroll&&t.removeEventListener("scroll",this._handleScroll)}},beforeDestroy:function(){this.$unbindScroll()},watch:{scroller:function(t,e){console.log("5.触发了watch1...",t),console.log("5.触发了watch1...",e),t!==e&&(console.log("6.触发了watch2..."),this.$unbindScroll(e),this.$bindScroll(t))}}}},52:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),n=i(27),o=i.n(n),a=i(24),r=i(23),l=i(28),c=i.n(l),d=i(26),u=i.n(d),f=i(25);i.n(f);s.default.component(c.a.name,c.a),s.default.use(u.a),new s.default({el:"#app",router:r.a,store:a.a,render:function(t){return t(o.a)}});var h=0,v=document.querySelector(".app-view");r.a.beforeEach(function(t,e,i){console.log("to.path",t.path),/^\/((?:[^\/]+?))(?:\/(?=$))?$/i.test(t.path)?console.log("2.这里被执行了..."):(console.log("1.这里被执行了...",e.matched[0].regex),v=document.querySelector(".app-view"),h=v.scrollTop,console.log("indexScrollTop:",h)),i()}),r.a.afterEach(function(t,e,i){/^\/((?:[^\/]+?))(?:\/(?=$))?$/i.test(t.path)?(s.default.nextTick(function(){v.scrollTop=h}),console.log("2.aftereach，这里被执行了...")):(v.scrollTop=0,console.log("1.aftereach，这里被执行了..."))})},53:function(t,e,i){"use strict";var s=i(3),n=i.n(s),o=i(21),a=i.n(o);e.a={getChannels:function(t){var e=t.commit;t.state;n.a.get("https://api.app.btime.com/channel/getchannel").then(function(t){var i=t.data.data.channel[0].list;e("getChannels",i),e("setShowList",!0)})},getNewsList:function(t,e){var i=t.commit;a()("https://h5.btime.com/index/list?cid="+e.cid+"&offset=0&refresh_type=1&refresh=1&count=12",function(t,s){console.log("err",t),i("getNewsList",{data:s.data,cid:e.cid}),i("setLoadingList",!1)})},getArticle:function(t,e){var i=t.commit;a()("https://api.btime.com/trans?gid="+e+"&token=1ffeeeb68d0daf22c3af3a957dba5b7c&sign=c14b395",function(t,e){console.log("请求文章是触发的err",t),i("getArticle",e.data),i("setLoadingArticle",!1),console.log("请求到的文章：",e.data)})},loadMore:function(t,e){var i=t.commit;i("setIsLoadMore",!0),a()("https://h5.btime.com/index/list?cid="+e+"&offset=0&refresh_type=1&refresh=1&count=3",function(t,s){console.log("loadMore执行了..",t),i("getNewsList",{data:s.data,cid:e}),i("setIsLoadMore",!1),t&&console.log("出错了...")})},refreshMore:function(t,e){var i=t.commit;i("setRefreshing",!0),a()("https://h5.btime.com/index/list?cid="+e+"&offset=0&refresh_type=1&refresh=1&count=12",function(t,s){i("refreshMore",{data:s.data,cid:e}),i("setRefreshing",!1)})}}},54:function(t,e,i){"use strict";e.a={channels:function(t){return t.channels},newslist:function(t){return t.newslist},article:function(t){return t.article},showList:function(t){return t.showList},loadingList:function(t){return t.loadingList},loadingArticle:function(t){return t.loadingArticle},isLoadMore:function(t){return t.isLoadMore},refreshing:function(t){return t.refreshing}}},55:function(t,e,i){"use strict";e.a={getChannels:function(t,e){for(var i=0;i<e.length;i++)t.channels.push(e[i])},getNewsList:function(t,e){console.log("来自于mutations的打印",e.data);for(var i=0;i<e.data.length;i++)t.newslist[e.cid].push(e.data[i]),console.log("type:"+e.data[i].type)},refreshMore:function(t,e){for(var i=0;i<e.data.length;i++)t.newslist[e.cid].unshift(e.data[i])},getArticle:function(t,e){t.article=e},setArticle:function(t){t.article={}},setShowList:function(t,e){t.showList=e},setLoadingList:function(t,e){t.loadingList=e},setLoadingArticle:function(t,e){t.loadingArticle=e},setIsLoadMore:function(t,e){t.isLoadMore=e},setRefreshing:function(t,e){t.refreshing=e}}},86:function(t,e){},87:function(t,e){},88:function(t,e){},89:function(t,e){},90:function(t,e){},93:function(t,e,i){i(86);var s=i(1)(i(48),i(96),null,null);t.exports=s.exports},94:function(t,e,i){i(90);var s=i(1)(i(49),i(100),null,null);t.exports=s.exports},95:function(t,e,i){i(88);var s=i(1)(i(50),i(98),null,null);t.exports=s.exports},96:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.loadingArticle?i("mu-circular-progress",{attrs:{size:40}}):t._e(),t._v(" "),i("div",{staticClass:"article"},[i("h1",[t._v(t._s(t.article.title))]),t._v(" "),i("div",{staticClass:"article-info"},[i("span",{staticClass:"info"},[t._v(t._s(t.article.source))]),t._v(" "),i("span",{staticClass:"info"},[t._v(t._s(t.article.time))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.article.summary,expression:"article.summary"}],staticClass:"summary"},[t._v(t._s(t.article.summary))]),t._v(" "),i("div",{attrs:{id:"art-content"}},t._l(t.article.content,function(e,s){return i("div",{key:s},["txt"==e.type?i("div",{staticClass:"txt block",domProps:{innerHTML:t._s(e.value)}}):t._e(),t._v(" "),"img"==e.type?i("div",{staticClass:"block"},[i("img",{attrs:{src:e.value}})]):t._e()])}))])],1)},staticRenderFns:[]}},97:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"infinite-scroll"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loader"},[i("svg",{staticClass:"loader-circular",attrs:{viewBox:"25 25 50 50"}},[i("circle",{staticClass:"loader-path",attrs:{cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"5","stroke-miterlimit":"10"}})])]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"infinite-scroll-text"},[t._v(t._s(t.loadingText))])])},staticRenderFns:[]}},98:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"demo-infinite-container"},[i("mu-list",[t._l(t.list,function(e){return[i("mu-list-item",{attrs:{title:e}}),t._v(" "),i("mu-divider")]})],2),t._v(" "),i("mu-infinite-scroll",{attrs:{scroller:t.scroller,loading:t.loading},on:{load:t.loadMore}})],1)},staticRenderFns:[]}},99:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("keep-alive",[i("router-view",{staticClass:"app-view"})],1)],1)},staticRenderFns:[]}}},[52]);
//# sourceMappingURL=app.b0138fc6535151514521.js.map